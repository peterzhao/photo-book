<div class="section section--head">
  <div class="row row-heading">
    <h1>Nina's Photo Gallery</h1>
  </div>
  <div class="row">
    <div class="gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <% photos.forEach((photo, index) => { %>
        <a href="<%= photo.large %>" data-size="768x1024" data-author="Nina" item-index="<%= index %>" class="gallery-item">
          <img src="<%= photo.thumbnail %>" alt="" />
        </a>
      <% }) %>
    </div>
  </div>
  <% include ./_pswp %>
</div>

<script>
  function initGallery(index) {
    var pswpElement = $('.pswp')[0];
    var galleryItems = $('.gallery-item');
    var items = $.map(galleryItems, function(item) {
      return {
        src: $(item).attr('href'),
        w: 1048,
        h: 768
      };
    });
    var options = {
        index: index
    };
    var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);
    gallery.init();
  }
  $(function() {
    $('.gallery-item').bind('click', function(e) {
      e.preventDefault();
      initGallery($(this).attr('item-index'));
    });
  });
</script>
